(function(f,c){f.Exploder=function(a,h){this.options=c.extend({},this.options,h);this.alpha=this.options.startingAlpha;var d=this.options.pointColor.replace(/#/,"");this.pointColor=[parseInt(d.substr(0,2),16),parseInt(d.substr(2,2),16),parseInt(d.substr(4,2),16)];this.body=c("body");this.source=a};f.Exploder.prototype={options:{duration:1,pointRadius:1,seeds:500,startingPositionVariation:1,incrementVariation:2,pointColor:"#333333",startingAlpha:255,alphaIncrement:15,xVariation:1.5,yVariation:1,destroySource:!0,
width:200,height:200,onExplodeFinished:null},explode:function(){this.canvas=c("<canvas></canvas>");this.canvas.css("position","absolute");this.canvas.width(this.options.width);this.canvas.height(this.options.height);this.body.append(this.canvas);var a=this.source.offset();a.left-=this.options.width/2;a.left+=this.source.width()/2;a.top-=this.canvas.height()/2;a.top+=this.source.height()/2;this.canvas.offset(a);this.processing=new Processing(this.canvas[0],this.doExplode.bind(this))},doExplode:function(a){this.options.destroySource&&
this.source.remove();a.size(this.options.width,this.options.height);a.background(255,0);var c=this.options.width/2-this.options.pointRadius,d=this.options.height/2-this.options.pointRadius,g=[];for(i=0;i<this.options.seeds;++i){var f=c,j=d,b=2*Math.random()*Math.PI,e=Math.sin(b)*this.options.incrementVariation,b=Math.cos(b)*this.options.incrementVariation,e=e+(2*Math.random()*this.options.incrementVariation-this.options.incrementVariation),b=b+(2*Math.random()*this.options.incrementVariation-this.options.incrementVariation),
e=e*this.options.xVariation,b=b*this.options.yVariation;g.push({x:f,y:j,xInc:e,yInc:b})}a.draw=function(){a.background(255,0);0<this.alpha?this.alpha-=this.options.alphaIncrement:this.finishExplode();a.fill(this.pointColor[0],this.pointColor[1],this.pointColor[2],this.alpha);a.noStroke();for(i=0;i<g.length;++i){var b=g[i];a.ellipse(b.x,b.y,2*this.options.pointRadius,2*this.options.pointRadius);b.x+=b.xInc/this.options.duration;b.y+=b.yInc/this.options.duration}}.bind(this)},finishExplode:function(){this.canvas.remove();
this.processing.exit();if(this.options.onExplodeFinished)this.options.onExplodeFinished()}}})(window,jQuery);
