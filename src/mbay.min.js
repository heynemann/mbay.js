(function(g,c){g.Exploder=function(a,e){this.options=c.extend({},this.options,e);this.alpha=this.options.startingAlpha;var b=this.options.pointColor.replace(/#/,"");this.pointColor=[parseInt(b.substr(0,2),16),parseInt(b.substr(2,2),16),parseInt(b.substr(4,2),16)];this.body=c("body");this.source=c(a)};g.Exploder.prototype={options:{duration:1,pointRadius:1,seeds:500,startingPositionVariation:1,incrementVariation:2,pointColor:"#333333",startingAlpha:255,alphaIncrement:15,xVariation:1.5,yVariation:1,
destroySource:!0},explode:function(){this.canvas=c("<canvas></canvas>");this.body.append(this.canvas);var a=this.source.offset();a.left-=this.canvas.width()/2;a.left+=this.source.width()/2;a.top-=this.canvas.height()/2;a.top+=this.source.height()/2;this.canvas.offset(a);this.processing=new Processing(this.canvas[0],this.doExplode.bind(this))},doExplode:function(a){this.options.destroySource&&this.source.remove();var e=this.canvas.width(),b=this.canvas.height();a.size(e,b);a.background(255,0);var e=
e/2-this.options.pointRadius,b=b/2-this.options.pointRadius,c=[];for(i=0;i<this.options.seeds;++i){var g=e,h=b,d=2*Math.random()*Math.PI,f=Math.sin(d)*this.options.incrementVariation,d=Math.cos(d)*this.options.incrementVariation,f=f+(2*Math.random()*this.options.incrementVariation-this.options.incrementVariation),d=d+(2*Math.random()*this.options.incrementVariation-this.options.incrementVariation),f=f*this.options.xVariation,d=d*this.options.yVariation;c.push({x:g,y:h,xInc:f,yInc:d})}a.draw=function(){a.background(255,
0);0<this.alpha?this.alpha-=this.options.alphaIncrement:this.finishExplode();a.fill(this.pointColor[0],this.pointColor[1],this.pointColor[2],this.alpha);a.noStroke();for(i=0;i<c.length;++i){var b=c[i];a.ellipse(b.x,b.y,2*this.options.pointRadius,2*this.options.pointRadius);b.x+=b.xInc/this.options.duration;b.y+=b.yInc/this.options.duration}}.bind(this)},finishExplode:function(){this.canvas.remove();this.processing.exit()}}})(window,jQuery);
